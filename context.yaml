$schema: 'https://raw.githubusercontent.com/context-hub/generator/refs/heads/main/json-schema.json'

tools:
  - id: run-tests
    description: 'Run tests'
    type: run
    commands:
      - cmd: vendor/bin/phpunit

documents:
  - description: 'Project structure overview'
    outputPath: project-structure.md
    sources:
      - type: tree
        sourcePaths:
          - src
          - tests
        showCharCount: true

  - description: Git changes
    outputPath: docs/recent-changes.md
    sources:
      - type: git_diff
        commit: unstaged
        filePattern: "*.php"
        notPath:
          - tests
          - vendor

  - description: Source codes
    outputPath: source-codes.md
    sources:
      - type: file
        sourcePaths:
          - src
        notPath:
          - Attributes
          - Transports
          - Session
          - Defaults
          - Utils/DocBlockParser.php
          - Utils/SchemaGenerator.php

  - description: Dispatcher
    outputPath: src/dispatcher.md
    sources:
      - type: file
        sourcePaths:
          - src/Dispatcher.php
          - src/DispatcherRoutesFactory.php
          - src/Contracts/DispatcherRoutesFactoryInterface.php
          - src/Routes
          - src/Contracts/RouteInterface.php

  - description: Resources
    outputPath: src/resources.md
    sources:
      - type: file
        sourcePaths:
          - src/Elements

  - description: HTTP Server
    outputPath: src/http-server.md
    sources:
      - type: file
        sourcePaths:
          - src/Transports/HttpServer.php
          - vendor/react/http/src/HttpServer.php
          - vendor/react/http/src/Io/MiddlewareRunner.php
          - vendor/react/http/src/Middleware
          - src/Transports/Middleware
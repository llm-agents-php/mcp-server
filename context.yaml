$schema: 'https://raw.githubusercontent.com/context-hub/generator/refs/heads/main/json-schema.json'

tools:
  - id: run-tests
    description: 'Run tests'
    type: run
    commands:
      - cmd: vendor/bin/phpunit

documents:
  - description: 'Project structure overview'
    outputPath: project-structure.md
    sources:
      - type: tree
        sourcePaths:
          - src
          - tests
        showCharCount: true

  - description: Git changes
    outputPath: docs/recent-changes.md
    sources:
      - type: git_diff
        commit: unstaged
        filePattern: "*.php"
        notPath:
          - tests
          - vendor

  - description: Dispatcher
    outputPath: src/dispatcher.md
    sources:
      - type: file
        sourcePaths:
          - src/Dispatcher.php
          - src/Dispatcher
          - src/Contracts/DispatcherInterface.php

  - description: CompletionProvider
    outputPath: src/completion-provider.md
    sources:
      - type: file
        sourcePaths:
          - src/Defaults/EnumCompletionProvider.php
          - src/Defaults/ListCompletionProvider.php
          - src/Contracts/CompletionProviderInterface.php

  - description: Tool executor
    outputPath: src/tool-executor.md
    sources:
      - type: file
        sourcePaths:
          - src/Contracts/ToolExecutorInterface.php
          - src/Defaults/ToolExecutor.php
          - vendor/php-mcp/schema/src/Content/Content.php
          - vendor/php-mcp/schema/src/Content/TextContent.php
          - src/Exception/ToolNotFoundException.php
          - src/Elements/RegisteredTool.php
          - vendor/php-mcp/schema/src/Tool.php
          - tests/Unit/Defaults/ToolExecutorTest.php

  - description: Resources
    outputPath: src/resources.md
    sources:
      - type: file
        sourcePaths:
          - src/Elements

  - description: HTTP Server
    outputPath: src/http-server.md
    sources:
      - type: file
        sourcePaths:
          - src/Transports/HttpServer.php
          - vendor/react/http/src/HttpServer.php
          - vendor/react/http/src/Io/MiddlewareRunner.php
          - vendor/react/http/src/Middleware
          - src/Transports/Middleware